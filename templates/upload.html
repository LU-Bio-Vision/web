<!DOCTYPE html>

<html>

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
		crossorigin="anonymous"></script>
	<title>LUBioVision</title>
	<meta charset=utf-8 />
	<script src="jquery.js"></script>
	<script src="{{ url_for('static', filename='upload.js') }}"></script>
	<script> 
		$(function(){
		  $("#includedEditContent").load("edit.html"); 
		});
		</script> 

	<style>
		article,
		aside,
		figure,
		footer,
		header,
		hgroup,
		menu,
		nav,
		section {
			display: block;
		}
	</style>

<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
.loader {
  border: 16px solid #f3f3f3;
  border-radius: 50%;
  border-top: 16px solid #048e29;
  width: 120px;
  height: 120px;
  -webkit-animation: spin 2s linear infinite; /* Safari */
  animation: spin 2s linear infinite;
}

/* Safari */
@-webkit-keyframes spin {
  0% { -webkit-transform: rotate(0deg); }
  100% { -webkit-transform: rotate(360deg); }
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}


#image-container {
  width: 300px;
  height: 300px;
  position: relative;
  overflow: hidden;
}

#uploaded-image {
  width: 100%;
  height: auto;
  transition: transform 0.3s;
}

.zoomed {
  transform: scale(var(--scale-factor)) rotate(var(--rotation-angle));
}


</style>
</head>

<body>

	<div>
		<div>
			<nav class="navbar navbar-expand-lg navbar-light" style="background-color: #ffffff;">
				<img class="logo" src="\static\logo.jpeg" style="margin-left: 110px;  width: 180px; height: 70px;">


				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
				aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation" style=" margin-left: 10px; border-radius: 0px; border-color: #ffffff;">
				<span class="navbar-toggler-icon"></span>
			  </button>
			  

				<div class="collapse navbar-collapse" style="margin-left: 48%;" id="navbarNav">
					<ul class="navbar-nav">
						<li class="nav-item active">
							<a class="nav-link" href="/">Home</a>

						</li>
						<li class="nav-item">
							<a class="nav-link" style="color: #02c33c;" href="/generate"><strong>Generate</strong></a>
						</li>					
						<li class="nav-item">
							<a class="nav-link" href="/usermanual">User Manual</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="/aboutus">About Us</a>
						</li>
					</ul>
				</div>
			</nav>

		</div>
	</div>


	
	<div class="mt-2">
		<div class="row">
			<div class="col-sm-1"></div>
			<div class="col-sm-5">
				<div>
					<div class="d-flex justify-content-left align-items-left">
						<p class="text-lg fs-1" style="color: #12691f;">
							</br>
							<strong>Accurate, Fast & Sensitive</strong></br>
						</p>
					</div>
					<div class="text-left">
						<p class="">Now you don't need to delaying to check your skin .This website help to detect
							melanoma skin cancer image within few Seconds</p>
						</br>
					</div>
				</div>
				
				<div class="mt-3">

					<form action="http://127.0.0.1:5000/result" method="POST"  enctype="multipart/form-data">

						{% if buttonClicked %} 

						<div class="mb-2">
							<label for="formFile" class="form-label" style="color: #12691f; font-weight: bold; font-size: x-large;">Select your skin image</label>
							<input class="form-control" type='file' name='file' id="formFile" onchange="readURL(this);">
						</br>
						</div>

						
						<div id="image-container">
						<img src="" id="uploaded-image" alt="Uploaded Image">
						</div>
						<input type="range" min="1" max="4" value="1" step="0.1" id="zoomer" oninput="zoomImage()">
						<button onclick="rotateImage()">Rotate</button>
						<button onclick="saveImage()">Save Image</button>
	
						<!-- <input type='file' name='file' onchange="readURL(this);" /> -->
						<!-- <img id="blah" src="#" alt="your image" /> -->
						<!-- <button type="submit">Predict</button> -->
					</br></br></br>
						<label for="model" style="color: #12691f; font-weight: bold; font-size: x-large;">Choose the AI model </label>
						</br>
					    
						<div class="row">
							<div class="col-sm-5">								  
								<input type="radio" id="cnn" name="model" value="cnn"  checked>
								<label for="cnn">CNN Model (Xception)</label><br>
							</div>
							<div class="col-sm-5">									
								<input type="radio" id="vit" name="model" value="vit">
								<label for="vit">VIT Model (SM-VIT)</label><br>
							</div>
						</div>

					   
						
						</br></br></br>
						<div class="d-flex justify-content-left align-items-left">
							<button type="submit" id="checkButton" onclick="changeContent(this)" class="btn btn-outline-success" style="width: 160px; height: 40px;">
								<p class="fs-6">
									Predict
								</p>
							</button>
						</br>

						{% else %} 
							<div class="loader"></div>
						
						{% endif %} 
					    
						</div>
					</form>
				</br>
				<div id="loading" style="color: #12691f; font-weight: bold"></div>

				
					

				</div>
			</div>
			<div class="col-sm-1"></div>
			<div class="col-sm-4" style="background-color: rgb(255, 255, 255);">
				<img class="logo" src="\static\bg1.png" style="width: 450px; height: 530px;">
			</div>
			<div class="col-sm-1"></div>
		</div>


	</div>

	</div>

	<script>

	// var buttonClicked = true;
	// window.addEventListener('load',function(){
	// console.log(buttonClicked);
	// document.getElementById('checkButton').addEventListener('click',function(){
	// 	buttonClicked = false;
	// 	console.log(buttonClicked);
	// });
	// });


	function changeContent(element) {
		buttonClicked = false;
    document.getElementById("loading").innerHTML = "Loading ... ";
	}

	var zoomer = document.getElementById("zoomer");
var uploadedImage = document.getElementById("uploaded-image");

function readURL(input) {
  if (input.files && input.files[0]) {
    var reader = new FileReader();
    reader.onload = function(e) {
      uploadedImage.setAttribute("src", e.target.result);
    }
    reader.readAsDataURL(input.files[0]);
  }
}

function zoomImage() {
  var zoomValue = zoomer.value;
  uploadedImage.style.setProperty("--scale-factor", zoomValue);
  uploadedImage.classList.add("zoomed");
}

function rotateImage() {
  uploadedImage.classList.toggle("rotated");
  var rotationAngle = uploadedImage.classList.contains("rotated") ? "90deg" : "0deg";
  uploadedImage.style.setProperty("--rotation-angle", rotationAngle);
}

function saveImage() {
  var imageURL = uploadedImage.src;

  var a = document.createElement("a");
  a.href = imageURL;
  a.download = "uploaded-image.jpg";
  a.click();
}

	</script>

</body>

</html>