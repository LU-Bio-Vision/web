<!DOCTYPE html>

<html>

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
		crossorigin="anonymous"></script>
	<script src="https://raw.githack.com/eKoopmans/html2pdf/master/dist/html2pdf.bundle.js"></script>
	<title>LUBioVision</title>
	<meta charset=utf-8 />

	<script src="{{ url_for('static', filename='upload.js') }}"></script>

	<style>
		article,
		aside,
		figure,
		footer,
		header,
		hgroup,
		menu,
		nav,
		section {
			display: block;
		}
	</style>

	<script>
		function generatePDF() {
			const element = document.getElementById("report");
			html2pdf().from(element).save();
		}

	</script>
</head>

<body>

	<div>
		<div>
			<nav class="navbar navbar-expand-lg navbar-light" style="background-color: #ffffff;">
				<img class="logo" src="\static\logo.jpeg" style="margin-left: 110px;  width: 180px; height: 70px;">


				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
					aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"
					style=" margin-left: 10px; border-radius: 0px; border-color: #ffffff;">
					<span class="navbar-toggler-icon"></span>
				</button>


				<div class="collapse navbar-collapse" style="margin-left: 48%;" id="navbarNav">
					<ul class="navbar-nav">
						<li class="nav-item active">
							<a class="nav-link" href="/">Home</a>

						</li>
						<li class="nav-item">
							<a class="nav-link" style="color: #02c33c;" href="/generate"><strong>Generate</strong></a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="/usermanual">User Manual</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="/aboutus">About Us</a>
							<!-- <a class="nav-link" style="color: #02c33c;" href="/result"><strong>Result</strong></a> -->
						</li>
					</ul>
				</div>
			</nav>

		</div>
	</div>

	<div class="mt-2">
		<div class="row">
			<div class="col-sm-1"></div>
			<div class="col-sm-5">
				<div>
					</br>
					<h1>Model Prediction</h1>

					<ul>

						<li>
							<h5 style="color: #0d5317;">Predicted skin cancer type is <strong
									style="font-size: larger;">{{ ss }}</strong></strong></h5>
						</li>

						<div>

							<li>
								<h5 style="color: #12691f; font-weight: 30px ;">Prediction Accuracy: {{accuracy}}</h5>
							</li>
						</div>

					</ul>
					<div class="text-left">
						<p>( For given skin image, Grad CAM and Grad CAM++ heatmap explainabilities are shown in
							the right side.)</p>
						</br>
					</div>
				</div>

				<div class="mt-3">
					<form action="http://127.0.0.1:5000/generate" method="POST" enctype="multipart/form-data">

						<div class="d-flex justify-content-left align-items-left">
							<input type="hidden" id="url" name="url" value="{{image}}">
							<button type="submit" class="btn btn-outline-success" style="width: 160px; height: 40px;">
								<p class="fs-6">
									Clear
								</p>
							</button>
						</div>

					</form>


					</br></br>


				</div>
			</div>

			<div class="col-sm-5" style="background-color: rgb(255, 255, 255);">
				<div style="padding-right: 0px; background-color: rgb(160, 255, 208); width: 200px; height: 10px;">
				</div>
				<h2>Explainability Heatmaps</h2>
				</br>
				<div class="row" style="background-color: rgb(255, 255, 255); text-align: center;">


					<!-- <div class="col-sm-1"></div> -->
					<div class="col-sm-4">
						<label for="model" style=" color: #12691f; font-weight: bold;">IMAGE </label>
						<img class="logo" src="{{image}}" style="width:160px; height: 150px;">
					</div>
					<div class="col-sm-4">
						<label for="model" style="color: #12691f; font-weight: bold;">Grad
							CAM++</label>
						<img class="logo" src="\static\uploaded\{{name}}_gradcam++.jpg"
							style="width: 160px; height: 150px;">
					</div>
					<div class="col-sm-4">
						<label for="model" style="color: #12691f; font-weight: bold;">Grad
							CAM</label>
						<img class="logo" src="\static\uploaded\{{name}}_gradcam.jpg"
							style="width: 160px; height: 150px;">
					</div>

				</div>
				</br>
				<p style="text-align:justify; "> The colour range of the heatmap can be described such that the colour
					dark blue indicates regions that contribute
					less to classification, whereas dark red indicates regions that contribute more. </p>



			</div>


			<div class="col-sm-1"></div>

		</div>

		</br>
		<div class="row">
			<div class="col-sm-1"></div>
			<div class="col-sm-10">
				<div style="padding-right: 0px; background-color: rgb(160, 255, 208); width: 100%; height: 3px;"></div>
				</br>
				<h2>Medical Report Generation</h2>
			</div>
			<div class="col-sm-1"></div>
		</div>

		<div class="row">

			<div class="col-sm-1"></div>


			<div class="col-sm-4">


				<form id="contact-form" class="col-sm-10 col-md-offset-1 scrollimation fade-left d3">

					</br>
					<div class="form-group">
						<label class="control-label" for="contact-name">Patient Name</label>
						<div class="controls">
							<input id="contact-name" name="contactName" placeholder="name*"
								class="form-control requiredField" data-new-placeholder="Your name" type="text"
								data-error-empty="Please enter  name">
							<i class="fa fa-user"></i>
						</div>
					</div><!-- End name input -->

					</br>
					<div class="form-group">
						<label class="control-label" for="contact-message">Your comment about the Prediction</label>
						<div class="controls">
							<textarea id="contact-message" name="comments" placeholder="Your message*"
								class="form-control requiredField" data-new-placeholder="Your message" rows="4"
								data-error-empty="Please enter your message"></textarea>
							<i class="fa fa-comment"></i>
						</div>
					</div><!-- End textarea -->
				</form><!-- End contact-form -->
			</br>
				<label class="control-label" for="contact-message">Result approval</label>
				<div class="row">
					<div class="col-sm-5">								  
						<input type="radio" id="Approve" name="model" value="Approve"  checked>
						<label for="Approve">Approve</label><br>
					</div>
					<div class="col-sm-5">									
						<input type="radio" id="Reject" name="model" value="Reject">
						<label for="Reject">Reject</label><br>
					</div>
				</div>
			</br>
			<div
							style="padding-right: 0px; background-color: rgb(160, 255, 208); width: 80%; height: 3px;">
						</div>
					</br>
			<button class="btn btn-outline-success" id="generatepdf" onclick="changeCont()"
				style="padding-top: 12px; width: 180px; height: 50px;">
				<p class="fs-6">
					Generate Report
				</p>
			</button>
				</br></br>
				<button class="btn btn-outline-success" id="downloadpdf"onclick="generatePDF()"
					style="padding-top: 12px; width: 180px; height: 50px; display: none;">
					<p class="fs-6">
						Download PDF
					</p>
				</button>



			</div>
			<div class="col-sm-6" id="report" style="border:1px solid black; ">

				<div class="row">
					<div class="col-sm-1"></div>


					<div class="col-sm-10">
						<div class="row" style="background-color: #00776d;">

							<div class="col-sm-4">
								<img class="logo" src="\static\logo.jpeg" style="  width: 180px; height: 70px;">
							</div>

							<div class="col-sm-8">
								</br>
								<h5 style="color: #bbfff9; font-weight: bold; ">Melanoma Skin Cancer Report </h5>
							</div>

						</div>
						</br>
						<div class="row">

							<p style="font-size: 16px;color: #0d5317; font-weight: bold;">Details</p>
							<div class="col-sm-10">
								<ul>

									<li>
										<p style=" font-size: 14px;">Report ID : {{id}} </p>

									</li>
									<li>
										<p style=" font-size: 14px;" id="p_name">Patient Name : </p>
									</li>
									<li>
										<p style=" font-size: 14px;">Date : {{date}} </p>
									</li>

								</ul>
							</div>



						</div>


						<div
							style="padding-right: 0px; background-color: rgb(160, 255, 208); width: 100%; height: 3px;">
						</div>
						</br>
						<div class="row">

							<div class="col-sm-4">
								<p style="font-size: 16px;color: #0d5317; font-weight: bold;">Input Skin Image</p>
								<img class="logo" src="{{image}}" style="width:100px; height: 90px;">
							</div>
							<div class="col-sm-8">
								<p style="font-size: 16px;color: #0d5317; font-weight: bold;">Model Prediction</p>
								<ul>

									<li>
										<p style=" font-size: 14px;">Predicted skin cancer type is
											{{ ss }}</p>
									</li>

									<div>

										<li>
											<p style=" font-size: 14px ;">Prediction Accuracy: {{accuracy}}</p>
										</li>
									</div>

								</ul>
							</div>
						</div>
						</br>
						<div
							style="padding-right: 0px; background-color: rgb(160, 255, 208); width: 100%; height: 3px;">
						</div>

						</br>
						<p style="font-size: 16px;color: #0d5317; font-weight: bold;">Explainability Heatmaps</p>
						<div class="row">
							<div class="col-sm-6">
								<p style="font-size: 16px;color: #000000; font-weight: bold;">Grad CAM++</p>
								<img class="logo" src="\static\uploaded\{{name}}_gradcam++.jpg"
									style="width: 100px; height: 90px;">
							</div>
							<div class="col-sm-6">
								<p style="font-size: 16px;color: #000000; font-weight: bold;">Grad CAM</p>
								<img class="logo" src="\static\uploaded\{{name}}_gradcam.jpg"
									style="width: 100px; height: 90px;">
							</div>
						</div>
						</br>
						<div
							style="padding-right: 0px; background-color: rgb(160, 255, 208); width: 100%; height: 3px;">
						</div>
					</br>
					<p style="font-size: 16px;color: #0d5317; font-weight: bold;">Dermatologist Comments </p>
				
					
					<div class="row">
						<div class="col-sm-9">
							<p style="font-size: 14px;" id="p_comment"></p>
						</div>
						<div class="col-sm-2">
						
							<img class="logo" id="approve_logo" src="static\approved.jpg"
								style="width: 100px; height: 100px; display: block;">
								<img class="logo" id="reject_logo" src="static\rejected.jpg"
								style="width: 100px; height: 100px; display: none;">
						</div>
					</div>
				</br></br>
					<div
							style="padding-right: 0px; background-color: #00776d; width: 100%; height:40px;">
						</div>
				
					</div>

					<div class="col-sm-1"></div>
				</div>
			</div>


			<div class="col-sm-1"></div>
		</div>


	</div>


	</div>

	</div>

	<script>
function changeCont(element) {
	
document.getElementById("p_name").innerHTML = "Patient Name : "+document.getElementById("contact-name").value;
document.getElementById("p_comment").innerHTML = document.getElementById("contact-message").value
document.getElementById("p_comment").innerHTML = document.getElementById("contact-message").value
document.getElementById("downloadpdf").style.display = 'block';

// var status=document.getElementsByName("model").value
if(document.getElementById("Reject").checked){
	document.getElementById("approve_logo").style.display = 'none';
	document.getElementById("reject_logo").style.display = 'block';
}
else{
	document.getElementById("approve_logo").style.display = 'block';
	document.getElementById("reject_logo").style.display = 'none';
}
// document.getElementById("generatepdf").style.display = 'none';
}



	</script>
</body>

</html>